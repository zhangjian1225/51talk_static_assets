define("chooseTime",["artTemplate"],function(e,t,a){var i=e("artTemplate");i.config("openTag","[["),i.config("closeTag","]]"),i.config("escape",!1);var s={tabDate:$("#tabDate"),basicDate:$("#basicDate"),freeTime:$("#freeTime"),sureBtn:$(".sure"),layerBtn:$(".layer"),event:function(){var e=this;$.ajax("/UrCourse/getCalendarList",{type:"GET",dataType:"json",data:{textbook_id:$("#textbook_id").val()},success:function(t){1e4==t.status?(e.basicDate.html(i("basic",t.data)),e.tabDate.html(i("chooseTab",t.data)),e.apiFreeTime(e.tabDate.find(".check").attr("data-date"))):alert(t.info)}}),this.tabDate.on("click","li",function(){e.sureBtn.addClass("gray"),$(this).addClass("check").siblings().removeClass("check"),e.freeTime.hide(),$(".load").show(),$(".seleTime").text("\u8bf7\u9009\u62e9\u4e0a\u8bfe\u65f6\u95f4"),e.apiFreeTime($(this).attr("data-date"))}),this.freeTime.on("click","li",function(){e.sureBtn.removeClass("gray"),$(this).hasClass("gray")||($(this).addClass("check").siblings().removeClass("check"),$(".seleTime").text(e.tabDate.find(".check").attr("data-date")+" "+e.freeTime.find(".check").attr("data-start-time")+"-"+e.freeTime.find(".check").attr("data-end-time")))}),this.sureBtn.click(_.debounce(function(){if(e.freeTime.find("li").hasClass("check")){$(this);$.ajax({url:"/UrCourse/doUrCourse",type:"post",dataType:"json",data:{date:e.tabDate.find(".check").attr("data-date"),time:e.freeTime.find(".check").attr("data-time-id"),textbook_id:$("#textbook_id").val()},success:function(t){1e4==t.status?window.location.href=t.data.url:(e.layerBtn.find(".word p").text(t.info),e.layerBtn.show())}})}else e.layerBtn.find("p").text("\u8bf7\u9009\u62e9\u4e0a\u8bfe\u65f6\u95f4\uff01"),e.layerBtn.show()},800)),$("#cancel").click(function(){e.layerBtn.hide()})},apiFreeTime:_.debounce(function(e){$.ajax({url:"/UrCourse/getDateTimeList",type:"GET",dataType:"json",data:{date:e,textbook_id:$("#textbook_id").val()},success:function(e){1e4==e.status?($(".load").hide(),$("#freeTime").show(),$("#freeTime").html(i("chooseTime",e))):alert(e.info)}})},500)};s.event()});