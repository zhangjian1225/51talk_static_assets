"use strict";define("exReceive/silder_verification",["exReceive/popup"],function(e,t,s){var d=e("exReceive/popup"),i=function(){this.smsCode=$("#smsCode"),this.timeNum=0,this._event(),this.times=60,this.timer=null,this.adminLd=$("#admin_id").val()};i.prototype={_event:function(){this.silderVerification()},silderVerification:function(){var o=this;$(".outer").delegate(".start","mousedown",function(e){o.timeout=setInterval(function(){o.timeNum++},1e3),$.ajax({url:"//www.51talk.com/ajax/slideCodeEvent",type:"get",dataType:"jsonp",crossDomain:!0,data:{action:"move_start",gt:1},async:!0}),o.el=$(".inner");var s=o.el.offset(),i=$(".outer").width()-o.el.width();o.$span=$(".outer>span"),o.$filter=$(".filter-box"),o.dx=0,$(document).mousemove(function(e){o.dx=e.pageX-s.left,o.dx<0?o.dx=0:o.dx>i&&(o.dx=i),o.$filter.css("width",o.dx),o.el.css("left",o.dx)}),$(document).mouseup(function(e){if($(document).off("mousemove"),$(document).off("mouseup"),o.dx=e.pageX-s.left,o.dx<i)o.dx=0,o.$span.html("\u70b9\u51fb\u5e76\u5411\u53f3\u6ed1\u52a8");else if(o.dx>=i){var t=$(".mobile").val();if(o.dx=i,clearTimeout(o.timeout),""==t)return alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"),void o.recoverySilder();if(!/^1[0-9]{10}$/.test(t))return alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"),void o.recoverySilder();$.ajax({url:"//www.51talk.com/ajax/slideCodeEvent",type:"get",dataType:"jsonp",crossDomain:!0,data:{action:"success",gt:o.timeNum},async:!1,success:function(e){1==e.status?(o.smsCode.removeClass("count-down"),o.dx=i,$(".outer").addClass("act"),o.$span.html("\u9a8c\u8bc1\u6210\u529f").css("color","#fff"),o.el.removeClass("start").addClass("end"),setTimeout(function(){$(".vscode").show(),$(".slideCode").hide(),o.smsCodeFn()},1e3)):(e.code=60111)&&(o.dx=0,o.$span.html("\u70b9\u51fb\u5e76\u5411\u53f3\u6ed1\u52a8"),d.showFn1(e.message))},error:function(){o.dx=0,o.$span.html("\u70b9\u51fb\u5e76\u5411\u53f3\u6ed1\u52a8"),d.showFn1("\u7f51\u7edc\u95ee\u9898")}})}o.dx>i?o.$filter.css("width",o.dx+12):o.$filter.css("width",o.dx),o.el.css("left",o.dx)})});o=this;$(".getAudioCode").on("click",function(){o.getAudioCode()})},recoverySilder:function(){this.dx=0,this.$span.html("\u70b9\u51fb\u5e76\u5411\u53f3\u6ed1\u52a8").css("color","#999"),this.$filter.css("width",this.dx),this.el.css("left",this.dx),$(".inner").removeClass("end").addClass("start"),$(".outer").removeClass("act")},smsCodeFn:function(){var t=this;$.ajax({url:"//www.51talk.com/ajax/sendReserveCheckCode",type:"post",data:{user_mobile:$(".mobile").val()},dataType:"jsonp",crossDomain:!0,success:function(e){1==e.status?t.getEndTime():alert(e.info)}})},getEndTime:function(){var e=this;e.timer=setInterval(function(){e.times--,0==e.times&&clearInterval(e.timer),$(".times span").text(e.times),0==e.times&&(e.times=60,e.recoverySilder(),$(".slideCode").show(),$(".getAudioCode").show(),$(".vscode").hide(),$(".times span").text(120))},1e3)},getAudioCode:function(){var t=this;$.ajax({url:"//www.51talk.com/ajax/sendReserveYy",type:"post",data:{user_mobile:$(".mobile").val()},dataType:"jsonp",crossDomain:!0,success:function(e){1==e.status?($(".vscode").show(),$(".getAudioCode").hide(),$(".slideCode").hide(),t.getEndTime()):alert(e.info)}})}},t.recoverySilderFn=function(){o.recoverySilder()};var o=new i});