"use strict";define("cnPackage/getPeriod",["cnPackage/buildClass","../common/layer"],function(t,e,i){var a=window.href_url,s=t("cnPackage/buildClass"),n=t("../common/layer"),o=t("json2");n.changeBtnText("\u6211\u77e5\u9053\u4e86");var d=function(){};d.prototype={constructor:d,formatDate:function(t){return t.split(" ")[0].replace(/-/g,"/")},makeLi:function(t){return"<li>"+this.formatDate(t.period_start_time)+"~"+(t.extra_period_end_time?this.formatDate(t.extra_period_end_time):this.formatDate(t.period_end_time))+"<span>\uff08"+t.format_class_type+"\uff09</span></li>"},dealSucc:function(t){this.initData();for(var e="",i=0;i<t.length;i++)e+=this.makeLi(t[i]);$("#js_date_list").html(e)},initData:function(){$("#js_date").removeClass("disable"),$("#disBuy").hide(),$("#buyBtn").show()},commonDis:function(){$("#js_date").addClass("disable"),$("#disBuy").show(),$("#buyBtn").hide()},disableBuy:function(){this.commonDis(),$("#disBuy").text("\u7acb\u5373\u8d2d\u4e70"),window.alert_text="\u8be5\u5957\u9910\u73ed\u7ea7\u5df2\u62a5\u6ee1\uff0c \u5982\u9700\u5e2e\u52a9\u8bf7\u8054\u7cfb\u5ba2\u670d4000-51-51-51",n.showFn(alert_text)},alreadyBuy:function(){this.commonDis(),$("#disBuy").text("\u6211\u8981\u7eed\u73ed"),window.alert_text="\u7eed\u73ed\u8fd8\u672a\u5f00\u59cb\uff0c \u5982\u6709\u9700\u8981\u8bf7\u8054\u7cfb\u60a8\u7684\u4e2d\u6559\u8001\u5e08\u3002",n.showFn(alert_text)},noLogin:function(){this.commonDis(),$("#disBuy").text("\u7acb\u5373\u8d2d\u4e70"),window.alert_text="\u8bf7\u5148\u767b\u5f55",n.showFn(alert_text)}};var r=new d,l={getDateList:function(t){$.get(a+"/ajax/getClassPeriod",t).then(function(t){$("#buyBtn").removeClass("hide");var e=t.status;if(1==e){$("#js_date").removeClass("hide");var i=t.data;window.dateList=i,r.dealSucc(i)}else 0==e?doubleDivision.noData=!0:3==e?($("#js_date").removeClass("hide"),r.alreadyBuy()):($("#js_date").removeClass("hide"),r.noLogin())})},getTimeList:function(t){$.get(a+"/ajax/getClassTime",t).then(function(t){1==t.status?(window.wierd=!1,window.time_list_index=-1,window.timeObj=t.data,s.selItems(date_index,time_index)):(window.wierd=!0,$("#js_time").addClass("disable"),n.showFn(t.info))})},checkCart:function(t){$.get(a+"/ajax/checkCart",t).then(function(e){if(1==e.status){var i=e.data,a=o.parse(t.cart).mix,s=$.extend(!0,{},a,i),d=o.stringify({mix:s});$("#cart").val(d),$("#buy_form").submit()}else n.showFn(e.info)})},getCourseList:function(t){$.get(a+"/api/pointList",t).then(function(t){if(1==t.status){for(var e="",i=0,a=t.data.length;i<a;i++)e+='<li class="li-spec" id="'+t.data[i].id+'"><span></span><div class="li-info"><div class="child_2"><p>'+t.data[i].show_name+'</p><p class="li-des">'+t.data[i].goods_num+"\u8282\u4e2d\u6559\u8bfe\uff0c"+t.data[i].point_num+"\u8282\u5916\u6559\u8bfe</p></div></div></li>";$("#courseInfo").html(e),$(".li-spec").eq(0).addClass("active")}})},getPrice:function(t){$.get(a+"/api/pointDetail",t).then(function(t){if(1==t.status){var e=t.data.info,i=e.agree_url;$("#newPrice").html(e.display_price),$("#oldPrice").html(e.price),$("#js_classname").html(e.name),$(".js_protocol").attr("href",i)}else n.showFn(t.info)})}};i.exports=l});