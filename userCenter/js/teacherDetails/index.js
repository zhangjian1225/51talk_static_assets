"use strict";define("teacherDetails/index",[],function(t,s,i){function n(){if(0<$(".instant-booking").length){var s=$('div[class="appointment-cont"]').find(".cont-top"),i=s.offset().top,n=$(".instant-booking"),e=$(".instant-booking-bottom").offset().top;$(window).scroll(function(){console.log(),i<=$(window).scrollTop()?s.addClass("cont-top-fixed"):s.removeClass("cont-top-fixed");var t=$(window).scrollTop()+$(window).height();0==$(window).scrollTop()?n.removeClass("instant-booking-fixed"):t<=e?n.addClass("instant-booking-fixed"):n.removeClass("instant-booking-fixed")})}}n();var e=!1,a=!1;$(".cont-bottom li");$(".cont-bottom li").click(function(){var t=$(this).parents(".cont-list"),s=t.next(".cont-list")?t.next(".cont-list"):null,i=$(this).index(),n=($(this).parents(".cont-list").index(),s.find("li").eq(i));$(this).hasClass("classGo")?($(this).removeClass("classGo"),$(this).find("input").removeAttr("checked"),"display: block;"==$(this).find(".tips-details-text").attr("style")&&$(this).find(".tips-details-text").hide()):($(this).addClass("classGo"),$(this).find("input").attr("checked","checked"),a||null==s||n.hasClass("classGo")||(e||(n.addClass("classGo").find(".tips-details-text").show(),n.find("input").attr("checked","checked"),e=!0),n.addClass("classGo"),a=!0))});var o,c;function l(t,s){var i="";if(0<t.length)for(var n=0;n<t.length;n++)i+='<p class="success-c">'+t[n]+"</p>";var e='<div class="collection-tips comon-tip" style="display:block;"><div class="teacher-bg-color"></div><div class="teacer-tips"><h3 class="t-tips-tit">\u6e29\u99a8\u63d0\u793a <span class="close-t-tips"></span></h3>'+i+'<div class="t-tips-sure"><span>'+s+"</span></div>";$("body").append(e)}$(".instant-booking a").click(function(){var t=$("#reserveForm");t.find("input[type='checkbox']:checked").length?t.submit():$(window).scrollTop(966)}),$(".tips-details-close").click(function(){return $(this).parent().hide(),!1}),$(".go-search").click(function(){var t=$("#teacherid").val(),s=$(this);$(this).hasClass("cancel-collection")?$.ajax({type:"POST",dataType:"json",url:"/ajax/delMyCollection",data:"t_id="+t,success:function(t){t.status?($(".clear-search").find("span").html(parseInt($(".clear-search").find("span").html())-1),s.removeClass("cancel-collection").html("<span></span>\u6536 \u85cf")):alert(t.info)}}):$.ajax({type:"POST",dataType:"json",url:"/ajax/collection",data:"t_id="+t,success:function(t){t.status?($(".collection-tips").show(),$(".clear-search").find("span").html(parseInt($(".clear-search").find("span").html())+1),s.addClass("cancel-collection").html("\u53d6\u6d88\u6536\u85cf")):alert(t.info)}})}),$(".share-flowers").find("li").eq(0).click(function(){var t=$(this).find("a").attr("data-tid"),i=parseInt($(this).find("a").attr("data-flowsers")),n=$(this);if(i<=0)return $(".flowers-tips").show(),$(".flowers-tips").find(".flowers-text").eq(1).hide(),$(".flowers-btn").find("span").eq(1).hide(),$(".flowers-tips").find(".flowers-text").html("\u60a8\u7684\u732e\u82b1\u6b21\u6570\u5df2\u7528\u5b8c"),void $(".f-sure").click(function(){return $(this).parents(".comon-tip").hide(),!1});$(".flowers-tips").show(),$(".flowers-text span").html(i),$(".f-sure").click(function(){return $.ajax({type:"POST",dataType:"json",url:"/ajax/doPresent",data:"t_id="+t,success:function(t){if(console.log(i),i--,t.status){if($(n).length){var s=parseInt(n.find("span").html())+1;n.find("span").html(s),$(".flowers-tips").hide()}else l(["\u732e\u82b1\u6210\u529f\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301\uff01"],"\u77e5\u9053\u4e86");parseInt(n.find("a").attr("data-flowsers",i)),i<1&&l(["\u60a8\u7684\u732e\u82b1\u6b21\u6570\u5df2\u7528\u5b8c"],"\u77e5\u9053\u4e86")}else l([t.info],"\u77e5\u9053\u4e86")}}),!1})}),$(".f-cancel").click(function(){$(this).parents(".comon-tip").hide()}),$(".share-flowers").find("li").eq(1).click(function(){$(".share-tips").show()}),$(".video a").click(function(){$(".video-tips").show(),$(".vjs-big-play-button").trigger("click")}),o="audio-cont",c=document.getElementById(o),$(c).on("loadedmetadata",function(){c.pause(),$(document).on("click",".mp3-start",function(){$(".mp3-start").addClass("start-now"),c.play()}),$(document).on("click",".start-now",function(){$(".mp3-start").removeClass("start-now"),c.pause()})}),setInterval(function(){var t,s=c.currentTime;t=s,t=Math.floor(t),$(".mp3-line-top").css({width:85*(t/c.duration).toFixed(4)+"%"})},1e3),$(".close-t-tips,.t-tips-sure span").click(function(){$(this).parents(".comon-tip").hide()});var d=$(".appointment-cont");d.eq(0).find(".last").click(function(){d.eq(0).addClass("hide"),d.eq(1).removeClass("hide"),n(),$(window).scrollTop(966)}),d.eq(1).find(".first").click(function(){d.eq(1).addClass("hide"),d.eq(0).removeClass("hide"),n(),$(window).scrollTop(966)})});