"use strict";define("common/timeout",[""],function(t,e,i){!function(){e.ajaxApiParams="point_package",e.timeout=function(){this.data={time:"2018-1-27 23:59:59",dayEle:"timeout_days",hourEle:"timeout_hours",minuteEle:"timeout_minutes",secondEle:"timeout_second"},this.initTimeoutData=function(){var t=this;$.ajax({url:window.href_url+"/api/pointBanner",type:"get",dataType:"json",data:{point_type:e.ajaxApiParams},success:function(e){1==e.status&&(t.data.time=new Date(e.data.end.replace(/\-/g,"/")).getTime()-(new Date).getTime(),$(".banner>img").prop({src:e.data.url}),t.timeout())}})},this.timeout=function(){var t=this;setTimeout(function(){t.data.time<=0?t.endFn():(t.data.time-=100,$("#"+t.data.dayEle).html(t.computedTime(t.data.time,"days")),$("#"+t.data.hourEle).html(t.computedTime(t.data.time,"hours")),$("#"+t.data.minuteEle).html(t.computedTime(t.data.time,"minutes")),$("#"+t.data.secondEle).html(t.computedTime(t.data.time,"seconds")),t.timeout())},100)},this.endFn=function(){$("#timeout>p").addClass("hide"),$("#timeout>p.default").removeClass("hide")},this.computedTime=function(t,e){if(t){var i=t/1e3;switch(e){case"days":return Math.floor(i/60/60/24);case"hours":return Math.floor(i/60/60%24);case"minutes":return Math.floor(i/60%60);case"seconds":return(i%60).toFixed(1)}}},this.init=function(){this.initTimeoutData()},this.init()}}()});